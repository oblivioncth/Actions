name: 'Add Tag'
description: 'Tags the current commit with the provided tag name'
author: 'oblivioncth'
inputs:
  tag:
    required: true
    description: Tag name
  message:
    required: false
    description: Make the tag annotated with this message
    default: ''
    
runs:
  using: 'composite'
  steps:
  - uses: oblivioncth/actions/.github/self_link@dev
  - name: Checkout Project
    id: proj-checkout
    uses: ./.this_repo/git/smart-checkout
  - name: Add
    shell: pwsh
    working-directory: ${{ steps.proj-checkout.outputs.path }}
    env:
      t_name: ${{ inputs.tag }}
      t_msg: ${{ inputs.message }}
    run: |
        $anno_opt=$(($Env:t_msg -ne "") ? "-a -m `"$Env:t_msg`"" : "")
        git tag $Env:t_name $anno_opt
        git push origin $Env:t_name
        
        